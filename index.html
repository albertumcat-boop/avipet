<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Control Pro - Gestión Médica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .no-print { display: none !important; }
            body { background-color: white !important; padding: 0; }
            .print-border { border: 1px solid black !important; }
            #doctorSeleccionadoPrint { display: block !important; }
        }
        .header-box { border: 1px solid black; padding: 4px; text-align: center; font-weight: bold; font-size: 10px; background: #f3f4f6; }
        .tab-active { border-bottom: 4px solid #2563eb; color: #2563eb; font-weight: bold; }
    </style>
</head>
<body class="bg-slate-100 font-sans text-slate-900">

    <div id="loginSection" class="fixed inset-0 bg-slate-900 flex items-center justify-center z-50">
        <div class="bg-white p-8 rounded-xl shadow-2xl w-80 text-center border-t-4 border-blue-600">
            <h2 class="text-xl font-bold mb-4 italic">Panel Administrador</h2>
            <input type="password" id="pinInput" placeholder="PIN 2026" class="w-full p-2 border rounded mb-4 text-center text-xl">
            <button onclick="verificarPin()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700">ENTRAR</button>
        </div>
    </div>

    <main id="adminSection" class="hidden max-w-5xl mx-auto p-4">
        
        <nav class="flex space-x-6 border-b-2 border-gray-200 mb-6 no-print">
            <button onclick="showTab('historia')" id="tabH" class="tab-active py-2">HISTORIA MÉDICA</button>
            <button onclick="showTab('insumos')" id="tabI" class="py-2 text-gray-500">COSTOS E INSUMOS</button>
            <button onclick="showTab('reporte')" id="tabR" class="py-2 text-gray-500">REPORTE DEL DÍA</button>
        </nav>

        <section id="sectionHistoria" class="bg-white p-8 shadow-md border border-gray-300">
            <div class="flex justify-between items-center border-b-4 border-black pb-4 mb-4">
                <div class="flex items-center gap-6">
                    <div class="w-20 h-20 border-4 border-black flex flex-col items-center justify-center bg-white">
                        <span class="text-4xl font-black">MV</span>
                    </div>
                    <div>
                        <select id="selectDoctor" onchange="cambiarDoctor(this.value)" class="no-print block w-full text-xl p-1 border-2 border-blue-600 rounded font-black uppercase bg-blue-50">
                            <option value="Darwin Sandoval">DR. DARWIN SANDOVAL</option>
                            <option value="Joan Silva">DR. JOAN SILVA</option>
                        </select>
                        <h1 id="doctorSeleccionadoPrint" class="hidden font-bold text-2xl tracking-tighter uppercase leading-none">Darwin Sandoval</h1>
                        <p class="text-[10px] font-black tracking-widest bg-black text-white px-2 mt-1 inline-block">MÉDICO VETERINARIO</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-xs font-bold uppercase border-b border-black inline-block px-2 mb-2">Historia Clínica</p>
                    <p class="text-[10px] font-bold uppercase">Fecha: <input type="text" id="fechaDoc" class="w-24 text-center border-b border-gray-400"></p>
                </div>
            </div>

            <div class="no-print bg-slate-800 p-4 rounded-lg mb-6 text-white">
                <p class="text-[10px] font-bold mb-2 text-blue-300 uppercase italic">Selección Múltiple de Procedimientos:</p>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                    <label class="flex items-center gap-2 p-2 border border-slate-600 rounded cursor-pointer hover:bg-slate-700">
                        <input type="checkbox" value="Sextuple" onchange="toggleServicio(this)"> <span class="text-[10px] font-bold uppercase">Sextuple</span>
                    </label>
                    <label class="flex items-center gap-2 p-2 border border-slate-600 rounded cursor-pointer hover:bg-slate-700">
                        <input type="checkbox" value="Antirrabica" onchange="toggleServicio(this)"> <span class="text-[10px] font-bold uppercase">Antirrábica</span>
                    </label>
                    <label class="flex items-center gap-2 p-2 border border-slate-600 rounded cursor-pointer hover:bg-slate-700">
                        <input type="checkbox" value="Hematologia" onchange="toggleServicio(this)"> <span class="text-[10px] font-bold uppercase">Hematología</span>
                    </label>
                    <label class="flex items-center gap-2 p-2 border border-slate-600 rounded cursor-pointer hover:bg-slate-700">
                        <input type="checkbox" value="Consulta" onchange="toggleServicio(this)"> <span class="text-[10px] font-bold uppercase">Consulta</span>
                    </label>
                </div>
            </div>

            <div class="grid grid-cols-2 border border-black text-[10px]">
                <div class="p-2 border-r border-black">
                    <div class="header-box mb-2 uppercase">Datos Mascota</div>
                    <p class="mb-1">NOMBRE: <input id="hNombre" class="border-b w-full font-bold uppercase"></p>
                    <p class="mb-1">RAZA: <input id="hRaza" class="border-b w-full uppercase"></p>
                </div>
                <div class="p-2">
                    <div class="header-box mb-2 uppercase">Datos Propietario</div>
                    <p class="mb-1">NOMBRE: <input id="hProp" class="border-b
